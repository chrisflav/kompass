{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}

{% load finance_extras %}

{% block extrahead %}
    {{ block.super }}
    {{ media }}
    <script src="{% static 'admin/js/cancel.js' %}" async></script>
    <script type="text/javascript" src="{% static "admin/js/vendor/jquery/jquery.js" %}"></script>
    <script type="text/javascript" src="{% static "admin/js/jquery.init.js" %}"></script>
{% endblock %}

{% block bodyclass %}{{ block.super }} app-{{ opts.app_label }} model-{{ opts.model_name }} invite-waiter
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% translate 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
&rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
&rsaquo; <a href="{% url opts|admin_urlname:'change' statement.pk|admin_urlquote %}">{{ statement|truncatewords:"18" }}</a>
&rsaquo; {% translate 'Overview' %}
</div>
{% endblock %}

{% block content %}
<h2>{% translate "Bills" %}</h2>

<p>
<ul>
    {% for bill in statement.bill_set.all %}
        <li>
            {{bill.short_description}} {%trans "for" %} {{ bill.amount }}€.
            {% if not bill.costs_covered %}
            This bill is not covered by the association.
            {% endif %}
        </li>
    {% endfor %}
</ul>
</p>

<p>{% blocktrans %}The total amount is {{total_bills}} €.{% endblocktrans %}</p>

{% if statement.excursion %}

<h2>{% trans "Excursion" %}</h2>

{% blocktrans %}
<p>
This excursion featured {{ staff_count }} youth leader(s), each costing
</p>
<p>
<ul>
    <li>
        {{ nights }} nights for {{ price_per_night }}€ per night making a total of {{ nights_per_yl }}€.
    </li>
    <li>
        {{ duration }} days for {{ allowance_per_day }}€ per day making a total of {{ allowance_per_yl }}€.
    </li>
    <li>
        {{ kilometers_traveled }} km by {{ means_of_transport }} ({{euro_per_km}} € / km) making a total of {{ transportation_per_yl }}€.
    </li>
</ul>
</p>
<p>
In total this is {{ total_per_yl }}€ times {{ staff_count }}, giving {{ total_staff }}€.
</p>
{% endblocktrans %}

{% endif %}

<h2>{% trans "Total" %}</h2>

<p>
{% blocktrans %} This results in a total amount of {{ total }} € {% endblocktrans %}
</p>

<form action="" method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="submit_statement">
    <input class="default" type="submit" name="confirm" value="{% translate 'Accept' %}">
    <input class="default" type="submit" name="reject" value="{% translate 'Reject' %}">
    <input class="default" type="submit" name="generate_transactions" value="{% translate 'Generate transactions' %}">
    <a href="#" class="button cancel-link">{% translate "Cancel" %}</a>
</form>
{% endblock %}
